<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Site at Capacity</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <script>
    </script>
  <div class="logo-container">
    <img src="../images/logotransparent.png" alt="Logo" class="logo">
  </div>
  
  <div class="loader">
    <div class="circle one"></div>
    <div class="circle two"></div>
    <div class="circle three"></div>
  </div>

  <div class="message">
    <h1>Oops! Our site is at full capacity ðŸ’¨</h1>
    <p2><b>Weâ€™ve got a bit of a crowd, but donâ€™t worry!</b>
    <br>Number of users waiting: <span id="waitingCount">0</span><br>
    Estimated wait time: <span id="waitTime">0</span> minutes</p2>
    <p>Weâ€™ll get you in soon!
    <br>In the meantime, have a laugh ðŸ˜… </p>
  </div>

  <!-- Bot Image Container -->
  <div class="bot-image-container">
    <img src="../images/AtCapacityBotTransparent.png" alt="Bot Image" class="botimage">
    <div class="fart-container">
      <p class="fart-text">*Pffft* You didnâ€™t hear that... right?</p>
    </div>
  </div>

  <script>
    // Fart joke logic
    const fartContainer = document.querySelector('.fart-container');
    const fartText = document.querySelector('.fart-text');
    
    const fartJokes = [
  "*Pffft* You didnâ€™t hear that... right?",
  "Silent but magical âœ¨ðŸ’¨",
  "Oops... the magic escaped ðŸ’¨",
  "Do you smell something? ðŸ¦¨",
  "*Toot toot* Just passing by!",
  "Why did the fart cross the road? To get to the other side! ðŸš—ðŸ’¨",
  "That wasnâ€™t me, it was the wind... or a ghost! ðŸ‘»ðŸ’¨",
  "I donâ€™t always fart, but when I do, I prefer to blame the dog! ðŸ¶ðŸ’¨",
  "*Brrap* It's a symphony of sounds! ðŸŽ¶ðŸ’¨",
  "Guess what? I just released my inner dragon! ðŸ‰ðŸ’¨",
  "Farting is like a magic trick: it disappears before you can see it! ðŸŽ©ðŸ’¨",
  "I asked my fart to do a trick, and it vanished into thin air! âœ¨ðŸ’¨",
  "Ever seen a fart do a backflip? Neither have I, but I bet it could! ðŸ¤¸â€â™‚ï¸ðŸ’¨",
  "Why donâ€™t scientists trust atoms? Because they make up everything, including farts! âš›ï¸ðŸ’¨",
  "What do you call a dinosaur fart? A blast from the past! ðŸ¦–ðŸ’¨",
  "Farts are just the bodyâ€™s way of saying, â€˜Iâ€™m full of hot air!â€™ ðŸŒ¬ï¸ðŸ’¨",
  "I let one rip in an elevator and suddenly became the most popular person! ðŸ›—ðŸ’¨",
  "If farts had a smell, mine would be a fine wineâ€”aged to perfection! ðŸ·ðŸ’¨",
  "Why did the guy bring a ladder to the bar? Because he heard the drinks were on the house and he wanted to fart on the way up! ðŸ»ðŸ’¨",
  "Whatâ€™s a ghostâ€™s favorite type of gas? Boo-t! ðŸ‘»ðŸ’¨",
  "What did one fart say to the other? 'You crack me up!' ðŸ˜‚ðŸ’¨",
  "I told my fart to be quiet, but it just laughed and made a louder noise! ðŸ¤­ðŸ’¨",
  "If you can smell it, itâ€™s real. If you canâ€™t, itâ€™s just a rumor! ðŸ”ðŸ’¨",
  "Why do farts smell? So that deaf people can enjoy them too! ðŸ‘‚ðŸ’¨",
  "What did the fart say to the sneeze? 'You blow me away!' ðŸ’¨ðŸ¤§",

  // Additional gassy-themed jokes
  "Feeling gassy? Better let it out before it blows up like a balloon! ðŸŽˆðŸ’¨",
  "Ever play hide and seek with a fart? Trust me, it always finds you! ðŸ•µï¸ðŸ’¨",
  "That one had some personality... I think it even waved on its way out! ðŸ‘‹ðŸ’¨",
  "*Squeak squeak* Looks like my stomachâ€™s got a flat tire! ðŸ›žðŸ’¨",
  "That was just a previewâ€”stay tuned for the main event! ðŸŽ¬ðŸ’¨",
  "Whatâ€™s worse than a loud fart? A silent one with a sneaky surprise! ðŸ¤«ðŸ’¨",
  "Oops! Did I just add a little something extra to the atmosphere? ðŸŒðŸ’¨",
  "Itâ€™s like Iâ€™ve got my own fog machine down there! ðŸŽ¤ðŸ’¨",
  "Looks like my behind is auditioning for a wind orchestra! ðŸŽºðŸ’¨",
  "They say laughter is the best medicine, but a good fart can cure just about anything! ðŸ˜‚ðŸ’¨",
  "Oops... that one definitely left its mark! ðŸ¦¨ðŸ’¨",
  "That fart had some attitudeâ€”it came out with a bang! ðŸ’¥ðŸ’¨",
  "Who needs sound effects when Iâ€™ve got my own gassy soundtrack? ðŸŽ¬ðŸ’¨",
  "Ever had a fart so powerful it should come with a warning label? âš ï¸ðŸ’¨",
  "My farts have their own rhythmâ€”itâ€™s like a gassy drum solo! ðŸ¥ðŸ’¨",
  "If I keep this up, I might need to install a fan back there! ðŸŒ€ðŸ’¨",
  "I think I just created my own personal cloud! â˜ï¸ðŸ’¨",
  "Oops, looks like my backside is competing with the weather forecast! ðŸŒ¦ï¸ðŸ’¨",
  "Who needs a whoopee cushion when youâ€™ve got the real thing? ðŸª‘ðŸ’¨",
  "A fart is like a secret handshake... except everyone gets to enjoy it! ðŸ¤ðŸ’¨",
  "Iâ€™m not gassy... Iâ€™m just really passionate about air quality! ðŸŒ¬ï¸ðŸ’¨",
  "That fart was like a pop quiz... I didnâ€™t see it coming either! ðŸ“ðŸ’¨",
  "I think my stomach just signed up for a farting contest... and itâ€™s winning! ðŸ†ðŸ’¨",
];



    function showFartJoke() {
      fartText.textContent = fartJokes[Math.floor(Math.random() * fartJokes.length)];
      fartContainer.classList.add('show');
      
      setTimeout(() => {
        fartContainer.classList.remove('show');
      }, 12000); // Shows joke for 5 seconds
    }

    setInterval(showFartJoke, Math.random() * 4000 + 12500);

    showFartJoke();

    // Waiting info logic
    let waitingCount = 0;
    const waitTimePerPerson = 2; // Estimated time in minutes per person

    function updateWaitingInfo() {
      fetch('/api/waiting-count')
        .then(response => response.json())
        .then(data => {
          waitingCount = data.waitingCount;
          document.getElementById('waitingCount').textContent = waitingCount;
          document.getElementById('waitTime').textContent = Math.ceil(waitingCount * waitTimePerPerson);

          // Check if a slot is available
          if (waitingCount < 1) {
            window.location.href = '/'; // Redirect to the main page if a slot is free
          }
        })
        .catch(error => console.error('Error fetching waiting count:', error));
    }

    // function updateWaitingInfo() {
    //   waitingCount++;
    //   document.getElementById('waitingCount').textContent = waitingCount;
    //   document.getElementById('waitTime').textContent = Math.ceil(waitingCount * waitTimePerPerson);
    // }

    // Simulate users joining the queue
    setInterval(updateWaitingInfo, 3000); // Update every 3 seconds
  </script>
</body>
</html>
